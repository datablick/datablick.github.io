<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>NTI Biosecurity</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

<!--Scripts-->

<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.js'></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<!--CSS-->

<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.css' rel='stylesheet' />

    <style>
        body {
        margin: 0;
        padding: 0;
        }
        
        #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;

        }
        
        #sidebar {
        position: absolute;
        top: 15px;
        left: 15px;
        bottom: 15px;
        width: 250px;
        overflow: auto;
        background: rgba(255, 255, 255, 0.8);
        font-family: "Arial";
        padding-left: 10px;
        }
    </style>

</head>

<body>
<div id='map'></div>
<div id='sidebar'></div>
<div id="tooltip-name"></div>
<div id='tooltip'></div>
    </div>
</body>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiaHJlY2h0IiwiYSI6IlFwV2hZMlUifQ.dwfwZ5jzPU1xv2mYYVzXlQ';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v8?fresh=true',
    center: [-77.014576, 38.899396],
    zoom: 11,
    pitch: 0,
    bearing: 0
});

var nav = new mapboxgl.NavigationControl();
map.addControl(nav, 'top-left');

map.on('load', function () {
            map.addSource('dc', {
                type: 'geojson',
                data: 'https://gist.githubusercontent.com/hrecht/82b6440ed3b982a6f594/raw/48832482382f81d1f6943896626e21b80da6b45c/data.geojson'
            });

            map.addLayer({
                "id": "tracts",
                "type": "fill",
                "source": "dc",
                "paint": {
                    "fill-color": {
                        property: 'TOTPOPCHG',
                        stops: [
                    [BREAKS[0], COLORS[0]],
                    [BREAKS[1], COLORS[1]],
                    [BREAKS[2], COLORS[2]],
                    [BREAKS[3], COLORS[3]],
                    [BREAKS[4], COLORS[4]],
                    [BREAKS[5], COLORS[5]]]
                    },
                    "fill-opacity": 0.7,
                    "fill-outline-color": "#ffffff"
                }
            });
        });

        map.on("mousemove", function (e) {
            var features = map.queryRenderedFeatures(e.point, {
                layers: ["tracts"]
            });

            if (features.length) {
                document.getElementById('tooltip-name').innerHTML = "Tract " + features[0].properties.FEDTRACTNO;
                document.getElementById('tooltip').innerHTML = Math.round(features[0].properties.TOTPOPCHG);
            } else {
                document.getElementById('tooltip-name').innerHTML = "";
                document.getElementById('tooltip').innerHTML = "";
            }
        });
</script>
</html>
